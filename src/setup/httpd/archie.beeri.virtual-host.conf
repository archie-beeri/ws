<VirtualHost *:80>

	ServerName  localhost
	
	# Angular app
	#Alias /   /var/www/archie/beeri
	DocumentRoot /var/www/archie/beeri
	<Directory "/var/www/archie/beeri">
		AllowOverride All
		RewriteEngine On
		RewriteBase /
		RewriteRule ^index\.html$ - [L]
		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteRule . index.html [L]
	</Directory>

	# Public asset-store
	Alias /assetstore/public   /var/opt/archie/beeri/assetstore/public
	<Directory /var/opt/archie/beeri/assetstore/public>
		Options FollowSymlinks
		AllowOverride none
		Require all granted
	</Directory>

	# Private asset-store
	Alias /assetstore/private   /var/opt/archie/beeri/assetstore/private
	<Directory /var/opt/archie/beeri/assetstore/private>
		Options FollowSymlinks
		AllowOverride none
		Require local
		Require ip (replace with beeri haverim)
		Require ip (replace with beeri anafim)
		Require ip (replace with beeri dfus)
	</Directory>

	# Tomcat
	ProxyPass        /api http://localhost:8080/archie-beeri-api
	ProxyPassReverse /api http://localhost:8080/archie-beeri-api

	# Solr
	ProxyPass        /docs http://localhost:8983/solr/archie_beeri/select
	ProxyPassReverse /docs http://localhost:8983/solr/archie_beeri/select

</VirtualHost>

